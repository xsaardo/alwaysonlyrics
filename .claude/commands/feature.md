---
description: Develop a new feature with specification, planning, and step-by-step implementation
---

You are helping develop a new feature for the AlwaysOnLyrics macOS app. Follow this structured workflow:

## Phase 1: Requirements Gathering
1. Ask the user detailed questions about the feature they want to build:
   - What is the feature and what problem does it solve?
   - What should the user experience be?
   - Are there any specific UI/UX requirements?
   - Should it integrate with existing components (SpotifyMonitor, LyricsService, etc.)?
   - Are there any performance or compatibility requirements?
   - Should it work with App Store sandboxing?

## Phase 2: Specification
2. Based on the answers, create a detailed specification document that includes:
   - Feature overview and goals
   - User stories or use cases
   - Technical requirements
   - Dependencies and integration points
   - Edge cases to handle
   - Testing requirements

3. Present the specification to the user and ask for confirmation or adjustments.

## Phase 3: Planning
4. Once the specification is confirmed, create a detailed implementation plan:
   - Break down into logical components/modules
   - Identify files that need to be created or modified
   - Define the order of implementation (dependencies first)
   - Note any potential risks or challenges

## Phase 4: Todo List Creation
5. Use the TodoWrite tool to create a comprehensive todo list with:
   - Specific, actionable tasks
   - Clear task descriptions (content and activeForm)
   - Logical ordering of tasks
   - All tasks starting in "pending" status

## Phase 5: Step-by-Step Implementation
6. Walk through each task systematically:
   - Mark current task as "in_progress" before starting
   - Implement the task completely
   - Mark as "completed" immediately after finishing
   - Move to the next task
   - Keep the user informed of progress

7. Throughout implementation:
   - Follow Swift/SwiftUI best practices
   - Match existing code style and patterns
   - Add appropriate error handling
   - Consider memory management and thread safety
   - Test as you go

8. After all tasks are complete:
   - Summarize what was built
   - Suggest next steps (testing, documentation, etc.)
